{% extends 'template_layout.html' %}

{%block nav %}

<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
        <li class="nav-item">
        <a class="nav-link" href="{{url_for("index")}}">Home </a>
        </li>
        <li class="nav-item">
        <a class="nav-link" href="{{url_for("login")}}">User Login</a>
        </li>
        <li class="nav-item">
        <a class="nav-link" href="{{url_for("create_account")}}">New Account</a>
        </li>
        <li class="nav-item">
        <a class="nav-link" href="{{url_for("recipes")}}">Back to Recipes</a>
        </li>
    </ul>
</div>

{% endblock %}

{% block content %}

<h2>{{get_recipe.recipe_name}} </h2>

<!-- {% for i in get_recipe.steps %}
<div> {{loop.index}} {{i}} </div>
{%endfor%} -->


<button type="button" class="btn btn-primary">
  <a href="{{url_for('reviews', recipe_id = get_recipe._id )}}"  style="text-decoration:none; color:white;">
   Ratings / Reviews <span class="badge badge-light">{{avg_likes}} / {{get_recipe.num_reviews}}</span></a>
</button>


<table class='table table-bordered'>
    <thead class='thead-light'>
        <tr>
            <th> Step </th>
            <th> Instructions </th>
            <th> Ingredients </th>
            <th> tools </th>
        </tr>
    </thead>
        {%for r in recipe_steps_num_list %}
        <tr>
            <td> {{loop.index}} </td>
            <td> {{get_recipe.steps[r]}} </td>
            <td> {{get_recipe.ingredients[r]}} </td>
            <td> {{get_recipe.tools[r]}} </td>
        </tr>
        {%endfor%}
</table>


<table>
    <tr>
        <td> Cuisine </td>
        <td> {{get_recipe.cuisine}} </td>
    </tr>
    <tr>
        <td> Contributor </td>
        <td> {{get_creator.user_name}} </td>
    </tr>   
    <tr>
        <td> Country </td>
        <td> {{get_creator.country}} </td>
    </tr>
    <tr>
        <td> Contributor's ratings </td>
        <td> {{get_recipe.my_rating}} </td>
    </tr>
    <tr>
        <td> date posted </td>
        <td> {{ get_recipe.date_posted}} </td>
    </tr>
    <tr>
        <td> date last edited </td>
        <td> {{ get_recipe.date_last_edited}} </td>
    </tr>
    <tr>
        <td> other recipes from contributor </td>
        <td> 
        {%for r in recipes_id_list_names%}
        <a href='{{url_for('recipe_display' , recipe_id = get_creator.my_recipes[loop.index0])}}' > {{r}} </a>
        {%endfor%}
        </td>
    </tr>
</table> 

{%endblock%}