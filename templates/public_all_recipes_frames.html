
{% extends 'template_layout.html' %}

{%block head%}

<title> Recipes - Recipesuccess</title>
<link rel="stylesheet" href="/static/css/public_all_recipes_frames.css" />

{%endblock%}

{%block nav %}

<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
        <li class="nav-item">
        <a class="nav-link" href="{{url_for("index")}}">Home </a>
        </li>
        <li class="nav-item">
        <a class="nav-link" href="{{url_for("login")}}">User Login</a>
        </li>
        <li class="nav-item">
        <a class="nav-link" href="{{url_for("create_account")}}">New Account</a>
        </li>
    </ul>
</div>

{% endblock %}

{%block content%}

<div class="d-flex align-items-center" >
    <div class="p-2" >
        <h1> Recipes 
            &nbsp;&nbsp;<a href="{{url_for('recipes')}}"><i class="fa fa-table fa-lg" aria-hidden="true" style="font-size:22px;"></i></a>
        </h1>
    </div>
    <div class="p-2 ml-auto ">
        
        <form method="POST"  action="{{url_for('recipes_frames_search')}}" class="d-flex justify-content-start ">
            <input type="text" class="form-control border-right-0" id="user_query" name="user_query" placeholder="Recipe/Cuisine" style="border-radius: 5px 0 0 5px;">
            <button class="input-group-text bg-primary text-white" type="submit" style="border-radius:  0 5px 5px 0;"><i class="fa fa-search"></i>
            </button> &nbsp;&nbsp;<a href="{{url_for('recipes_frames')}}" style="color:black;" > <i class="fa fa-undo" aria-hidden="true"></i></a>
        </form>
    </div>
</div>

<div class="card-columns">
    {%for r in get_recipes %}
    <div class="card">
        <div style="background-image : url('{{r.photos[0]}}'); background-size: cover; background-position: center; background-repeat: no-repeat; height: 300px; font-family: 'Judson', serif  !important; ">
            <button type="button" class="btn btn-primary" style="float:right;">
                Reviews/Ratings <span class="badge badge-light">{{r.num_reviews}}/{{r.avg_likes}}</span>
            </button>
            {% if r.photos|length == 0 %} <div style="position:absolute; top:50%; left:50%; transform: translate(-50%, -50%); "> No Photo </div> {%endif%}
            <div class="bg-secondary text-light rounded" style="position: absolute; bottom: 0; right:0; padding-left: 10px; padding-right:10px; padding-top: 5px; padding-bottom:5px;">
                <a class="recipe-link" href="{{url_for('recipe_display' , recipe_id=r._id)}}" target="_blank">
                <span style="font-size: 1em; font-family: 'Judson', serif  !important;">{{r.recipe_name}} <small class="badge badge-light"> {{r.date_posted[2:]}} </small></span>
                </a>
            </div>
        </div>
    </div>
    {%endfor%}

</div>

<!-- <table class='table table-bordered'>
    <thead class='thead-light'>
        <tr>
            <th>Index</th>
            <th>
                <a href="{{url_for('sort_recipe_a')}}" style="text-decoration:none;"><sup><i class="fa fa-sort-asc text-dark" aria-hidden="true"></i></sup></a>
                Recipe Name
                <a href="{{url_for('sort_recipe_d')}}" style="text-decoration:none;"><sub><i class="fa fa-sort-desc text-dark" aria-hidden="true"></i></sub></a>
            </th>
            <th class="col-hide-430">
                <a  href="{{url_for('sort_cuisine_a')}}" style="text-decoration:none;"><sup><i class="fa fa-sort-asc text-dark" aria-hidden="true"></i></sup></a>
                Cuisine
                <a href="{{url_for('sort_cuisine_d')}}" style="text-decoration:none;"><sub><i class="fa fa-sort-desc text-dark" aria-hidden="true"></i></sub></a>
            </th>
            <th class="col-hide">From</th>
            <th class="col-hide">Country</th>
            <th class="col-hide">
                <a href="{{url_for('sort_self_rating_a')}}" style="text-decoration:none;"><sup><i class="fa fa-sort-asc text-dark" aria-hidden="true"></i></sup></a>
                Self-rating
                <a href="{{url_for('sort_self_rating_d')}}" style="text-decoration:none;"><sub><i class="fa fa-sort-desc text-dark" aria-hidden="true"></i></sub></a>
            </th>
            <th class="col-hide">
                <a href="{{url_for('sort_date_a')}}" style="text-decoration:none;"><sup><i class="fa fa-sort-asc text-dark" aria-hidden="true"></i></sup></a>
                Date Posted
                <a href="{{url_for('sort_date_d')}}" style="text-decoration:none;"><sub><i class="fa fa-sort-desc text-dark" aria-hidden="true"></i></sub></a>
            </th>
            <th>
                <a href="{{url_for('sort_ratings_a')}}" style="text-decoration:none;"><sup><i class="fa fa-sort-asc text-dark" aria-hidden="true"></i></sup></a>
                 Ratings
                <a href="{{url_for('sort_ratings_d')}}" style="text-decoration:none;"><sub><i class="fa fa-sort-desc text-dark" aria-hidden="true"></i></sub></a>
            </th>
            <th> 
                <a href="{{url_for('sort_reviews_a')}}" style="text-decoration:none;"><sup><i class="fa fa-sort-asc text-dark" aria-hidden="true"></i></sup></a>
                Reviews 
                <a href="{{url_for('sort_reviews_d')}}" style="text-decoration:none;"><sub><i class="fa fa-sort-desc text-dark" aria-hidden="true"></i></sub></a>
            </th>
        </tr>
    </thead>
        {% for r in get_recipes %}
        
        <tr>
            <td>{{loop.index}}</td>
            <td> <a href= '{{url_for('recipe_display' , recipe_id=r._id)}}'>{{r.recipe_name}}</a> </td>
            <td class="col-hide-430"> {{r.cuisine}}</td>
            {%for i in get_users %}
                {%if i._id|string() == r.user_id|string() %}
                    <td class="col-hide"> {{i.user_name}} </td>
                    <td class="col-hide"> {{i.country}}</td>
                {%endif%}
            {%endfor%}
            <td class="col-hide" style="text-align:center;"> {{r.my_rating}} </td>

            <td class="col-hide"> {{r.date_posted}} </td>
            

            {%if r.num_reviews == 0 %}
                <td> Null </td>
            {%else%}
                <td> {{r.avg_likes}} </td>
            {%endif%}

            <td> <a href="{{url_for('reviews', recipe_id = r._id)}}">  {{r.num_reviews}} </a></td>
        </tr>
        {%endfor%}

</table> -->

{%endblock%}